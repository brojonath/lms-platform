/* src/app.css */

/**
 * ═══════════════════════════════════════════════════════════════
 * LMS PLATFORM - DESIGN SYSTEM
 * ═══════════════════════════════════════════════════════════════
 * 
 * Architecture:
 * 1. Fonts
 * 2. Tailwind + Plugins
 * 3. Primitives (raw color palette)
 * 4. Semantics (light/dark mode mappings)
 * 5. Theme (Tailwind v4 @theme)
 * 6. Base styles
 * 7. Component classes
 */

/* ═══════════════════════════════════════════════════════════════
   1. FONTS
   ═══════════════════════════════════════════════════════════════ */

@import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');

/* ═══════════════════════════════════════════════════════════════
   2. TAILWIND SETUP
   ═══════════════════════════════════════════════════════════════ */

@import "tailwindcss";
@plugin "@tailwindcss/forms";
@plugin "@tailwindcss/typography";

/* ═══════════════════════════════════════════════════════════════
   3. CSS VARIABLES - PRIMITIVES
   Raw color palette (never use these directly in components)
   ═══════════════════════════════════════════════════════════════ */

@layer base {
  :root {
    /* ─────────────────────────────────────────────────────────────
       GRAYSCALE
       ───────────────────────────────────────────────────────────── */
    --gray-50: #f9fafb;
    --gray-100: #f3f4f6;
    --gray-200: #e5e7eb;
    --gray-300: #d1d5db;
    --gray-400: #9ca3af;
    --gray-500: #6b7280;
    --gray-600: #4b5563;
    --gray-700: #374151;
    --gray-800: #1f2937;
    --gray-900: #111827;
    --gray-950: #0d1117;

    /* ─────────────────────────────────────────────────────────────
       BRAND COLORS
       ───────────────────────────────────────────────────────────── */
    --blue-50: #eff6ff;
    --blue-100: #dbeafe;
    --blue-400: #60a5fa;
    --blue-500: #3b82f6;
    --blue-600: #2563eb;
    --blue-700: #1d4ed8;

    --orange-50: #fff7ed;
    --orange-400: #fb923c;
    --orange-500: #f97316;
    --orange-600: #ea580c;

    --green-50: #f0fdf4;
    --green-400: #4ade80;
    --green-500: #22c55e;
    --green-600: #16a34a;

    --red-50: #fef2f2;
    --red-400: #f87171;
    --red-500: #ef4444;
    --red-600: #dc2626;

    --yellow-50: #fefce8;
    --yellow-400: #facc15;
    --yellow-500: #eab308;
    --yellow-600: #ca8a04;

    --purple-400: #c084fc;
    --purple-500: #a855f7;

    --pink-400: #f472b6;
    --pink-500: #ec4899;

    /* ─────────────────────────────────────────────────────────────
       ENGLISH LEVELS (CEFR)
       ───────────────────────────────────────────────────────────── */
    --level-a1: #22c55e;
    --level-a2: #84cc16;
    --level-b1: #eab308;
    --level-b2: #f97316;
    --level-c1: #ef4444;
    --level-c2: #dc2626;
  }
}

/* ═══════════════════════════════════════════════════════════════
   4. CSS VARIABLES - SEMANTICS
   These change based on light/dark mode
   ═══════════════════════════════════════════════════════════════ */

@layer base {
  :root {
    /* ─────────────────────────────────────────────────────────────
       LIGHT MODE (Default)
       ───────────────────────────────────────────────────────────── */
    
    /* Backgrounds */
    --bg-page: var(--gray-50);
    --bg-surface: #ffffff;
    --bg-card: #ffffff;
    --bg-elevated: #ffffff;
    --bg-muted: var(--gray-100);
    --bg-hover: var(--gray-100);
    --bg-active: var(--gray-200);

    /* Text */
    --text-primary: var(--gray-900);
    --text-secondary: var(--gray-600);
    --text-muted: var(--gray-500);
    --text-inverted: #ffffff;

    /* Borders */
    --border-default: var(--gray-200);
    --border-strong: var(--gray-300);

    /* Shadows */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    --shadow-glow: 0 0 20px rgba(59, 130, 246, 0.15);

    /* Brand */
    --brand-primary: var(--blue-500);
    --brand-primary-hover: var(--blue-600);
    --brand-primary-soft: var(--blue-50);
    --brand-primary-text: #ffffff;

    /* Semantic Colors */
    --color-success: var(--green-500);
    --color-success-soft: var(--green-50);
    --color-warning: var(--yellow-500);
    --color-warning-soft: var(--yellow-50);
    --color-error: var(--red-500);
    --color-error-soft: var(--red-50);
    --color-info: var(--blue-500);
    --color-info-soft: var(--blue-50);

    /* Status */
    --status-pending: var(--yellow-500);
    --status-pending-soft: var(--yellow-50);
    --status-approved: var(--green-500);
    --status-approved-soft: var(--green-50);
    --status-rejected: var(--red-500);
    --status-rejected-soft: var(--red-50);

    /* Interactive */
    --focus-ring: var(--blue-500);
    --focus-ring-offset: #ffffff;
  }

  /* ─────────────────────────────────────────────────────────────
     DARK MODE
     ───────────────────────────────────────────────────────────── */
  :root.dark {
    /* Backgrounds */
    --bg-page: var(--gray-950);
    --bg-surface: var(--gray-900);
    --bg-card: var(--gray-800);
    --bg-elevated: var(--gray-800);
    --bg-muted: var(--gray-800);
    --bg-hover: var(--gray-700);
    --bg-active: var(--gray-600);

    /* Text */
    --text-primary: var(--gray-100);
    --text-secondary: var(--gray-400);
    --text-muted: var(--gray-500);
    --text-inverted: var(--gray-900);

    /* Borders */
    --border-default: var(--gray-700);
    --border-strong: var(--gray-600);

    /* Shadows */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.4);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
    --shadow-glow: 0 0 20px rgba(96, 165, 250, 0.2);

    /* Brand (adjusted for dark) */
    --brand-primary: var(--blue-400);
    --brand-primary-hover: var(--blue-500);
    --brand-primary-soft: rgba(59, 130, 246, 0.15);
    --brand-primary-text: var(--gray-900);

    /* Semantic Colors */
    --color-success: var(--green-400);
    --color-success-soft: rgba(34, 197, 94, 0.15);
    --color-warning: var(--yellow-400);
    --color-warning-soft: rgba(234, 179, 8, 0.15);
    --color-error: var(--red-400);
    --color-error-soft: rgba(239, 68, 68, 0.15);
    --color-info: var(--blue-400);
    --color-info-soft: rgba(59, 130, 246, 0.15);

    /* Status */
    --status-pending-soft: rgba(234, 179, 8, 0.15);
    --status-approved-soft: rgba(34, 197, 94, 0.15);
    --status-rejected-soft: rgba(239, 68, 68, 0.15);

    /* Interactive */
    --focus-ring-offset: var(--gray-900);
  }
}

/* ═══════════════════════════════════════════════════════════════
   5. TAILWIND v4 @THEME
   Maps CSS variables to Tailwind classes
   ═══════════════════════════════════════════════════════════════ */

@theme {
  /* ─────────────────────────────────────────────────────────────
     TYPOGRAPHY
     ───────────────────────────────────────────────────────────── */
  --font-sans: "Plus Jakarta Sans", system-ui, sans-serif;

  --text-xs: 0.75rem;
  --text-xs--line-height: 1.5;
  --text-sm: 0.875rem;
  --text-sm--line-height: 1.5;
  --text-base: 1rem;
  --text-base--line-height: 1.6;
  --text-lg: 1.125rem;
  --text-lg--line-height: 1.6;
  --text-xl: 1.25rem;
  --text-xl--line-height: 1.5;
  --text-2xl: 1.5rem;
  --text-2xl--line-height: 1.4;
  --text-3xl: 1.875rem;
  --text-3xl--line-height: 1.3;
  --text-4xl: 2.25rem;
  --text-4xl--line-height: 1.2;
  --text-5xl: 3rem;
  --text-5xl--line-height: 1.1;

  /* ─────────────────────────────────────────────────────────────
     COLORS (Semantic)
     ───────────────────────────────────────────────────────────── */
  
  /* Backgrounds */
  --color-page: var(--bg-page);
  --color-surface: var(--bg-surface);
  --color-card: var(--bg-card);
  --color-elevated: var(--bg-elevated);
  --color-muted: var(--bg-muted);
  --color-hover: var(--bg-hover);
  --color-active: var(--bg-active);

  /* Text */
  --color-foreground: var(--text-primary);
  --color-foreground-secondary: var(--text-secondary);
  --color-foreground-muted: var(--text-muted);
  --color-foreground-inverted: var(--text-inverted);

  /* Border */
  --color-border: var(--border-default);
  --color-border-strong: var(--border-strong);

  /* Brand */
  --color-primary: var(--brand-primary);
  --color-primary-hover: var(--brand-primary-hover);
  --color-primary-soft: var(--brand-primary-soft);

  /* Semantic */
  --color-success: var(--color-success);
  --color-success-soft: var(--color-success-soft);
  --color-warning: var(--color-warning);
  --color-warning-soft: var(--color-warning-soft);
  --color-error: var(--color-error);
  --color-error-soft: var(--color-error-soft);
  --color-info: var(--color-info);
  --color-info-soft: var(--color-info-soft);

  /* Status */
  --color-status-pending: var(--status-pending);
  --color-status-pending-soft: var(--status-pending-soft);
  --color-status-approved: var(--status-approved);
  --color-status-approved-soft: var(--status-approved-soft);
  --color-status-rejected: var(--status-rejected);
  --color-status-rejected-soft: var(--status-rejected-soft);

  /* English Levels */
  --color-level-a1: var(--level-a1);
  --color-level-a2: var(--level-a2);
  --color-level-b1: var(--level-b1);
  --color-level-b2: var(--level-b2);
  --color-level-c1: var(--level-c1);
  --color-level-c2: var(--level-c2);

  /* Raw palette access */
  --color-orange-500: var(--orange-500);
  --color-green-500: var(--green-500);
  --color-blue-500: var(--blue-500);

  /* ─────────────────────────────────────────────────────────────
     SHADOWS
     ───────────────────────────────────────────────────────────── */
  --shadow-sm: var(--shadow-sm);
  --shadow-md: var(--shadow-md);
  --shadow-lg: var(--shadow-lg);
  --shadow-glow: var(--shadow-glow);

  /* ─────────────────────────────────────────────────────────────
     RADIUS
     ───────────────────────────────────────────────────────────── */
  --radius-sm: 0.25rem;
  --radius-md: 0.375rem;
  --radius-lg: 0.5rem;
  --radius-xl: 0.75rem;
  --radius-2xl: 1rem;

  /* ─────────────────────────────────────────────────────────────
     LAYOUT
     ───────────────────────────────────────────────────────────── */
  --spacing-18: 4.5rem;
  --spacing-22: 5.5rem;
}

/* ═══════════════════════════════════════════════════════════════
   6. DARK MODE VARIANT
   ═══════════════════════════════════════════════════════════════ */

@variant dark (&:where(.dark, .dark *));

/* ═══════════════════════════════════════════════════════════════
   7. BASE STYLES
   ═══════════════════════════════════════════════════════════════ */

@layer base {
  html {
    scroll-behavior: smooth;
    -webkit-tap-highlight-color: transparent;
  }

  body {
    @apply font-sans antialiased;
    @apply bg-page text-foreground;
    transition: background-color 0.2s ease, color 0.2s ease;
  }

  /* Dark mode gradient background */
  :root.dark body {
    background-image: linear-gradient(176deg, rgb(18, 24, 27) 50%, rgb(32, 39, 55) 100%);
    background-attachment: fixed;
    min-height: 100vh;
  }

  /* Scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-page;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-border rounded;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-border-strong;
  }

  /* Selection */
  ::selection {
    @apply bg-primary text-foreground-inverted;
  }

  /* Focus ring */
  :focus-visible {
    outline: 2px solid var(--focus-ring);
    outline-offset: 2px;
  }
}

/* ═══════════════════════════════════════════════════════════════
   8. COMPONENT CLASSES
   ═══════════════════════════════════════════════════════════════ */

@layer components {
  /* ─────────────────────────────────────────────────────────────
     CONTAINER
     ───────────────────────────────────────────────────────────── */
  .container {
    @apply mx-auto px-4 sm:px-6;
    max-width: 1200px;
  }

    /* ─────────────────────────────────────────────────────────────
     DECORATIVE ELEMENTS (Fireship style)
     ───────────────────────────────────────────────────────────── */
  .divider-gradient {
    @apply mx-auto w-24 h-1 my-12 rounded-full;
    background: linear-gradient(to right, var(--border-default), var(--border-strong));
  }
  
  :root.dark .divider-gradient {
    background: linear-gradient(to right, var(--gray-600), var(--gray-500));
  }

  /* ─────────────────────────────────────────────────────────────
     BUTTONS
     ───────────────────────────────────────────────────────────── */
  .btn {
    @apply inline-flex items-center justify-center gap-2;
    @apply px-4 py-2 rounded-lg;
    @apply text-sm font-semibold;
    @apply transition-all duration-150;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply bg-primary text-foreground-inverted;
    @apply hover:bg-primary-hover;
    @apply shadow-sm hover:shadow-md;
  }

  .btn-secondary {
    @apply bg-muted text-foreground;
    @apply border border-border;
    @apply hover:bg-hover hover:border-border-strong;
  }

  .btn-ghost {
    @apply bg-transparent text-foreground-secondary;
    @apply hover:bg-hover hover:text-foreground;
  }

  .btn-success {
    @apply bg-success text-white;
    @apply hover:opacity-90;
  }

  .btn-error {
    @apply bg-error text-white;
    @apply hover:opacity-90;
  }

  .btn-sm {
    @apply px-3 py-1.5 text-xs;
  }

  .btn-lg {
    @apply px-6 py-3 text-base;
  }

  /* ─────────────────────────────────────────────────────────────
     CARDS
     ───────────────────────────────────────────────────────────── */
  .card {
    @apply bg-card rounded-xl;
    @apply border border-border;
    @apply shadow-sm;
    @apply transition-all duration-200;
  }

  .card-interactive {
    @apply cursor-pointer;
    @apply hover:border-primary/50 hover:shadow-lg;
    @apply hover:-translate-y-0.5;
  }

  .card-elevated {
    @apply bg-elevated shadow-md;
  }

  /* ─────────────────────────────────────────────────────────────
     TAGS / BADGES
     ───────────────────────────────────────────────────────────── */
  .tag {
    @apply inline-flex items-center gap-1;
    @apply px-2.5 py-1 rounded-md;
    @apply text-xs font-medium;
  }

  .tag-default {
    @apply bg-muted text-foreground-secondary;
  }

  .tag-primary {
    @apply bg-primary-soft text-primary;
  }

  .tag-success {
    @apply bg-success-soft text-success;
  }

  .tag-warning {
    @apply bg-warning-soft text-warning;
  }

  .tag-error {
    @apply bg-error-soft text-error;
  }

  /* English Level Tags */
  .tag-a1 {
    background-color: rgba(34, 197, 94, 0.1);
    color: var(--level-a1);
  }
  .tag-a2 {
    background-color: rgba(132, 204, 22, 0.1);
    color: var(--level-a2);
  }
  .tag-b1 {
    background-color: rgba(234, 179, 8, 0.1);
    color: var(--level-b1);
  }
  .tag-b2 {
    background-color: rgba(249, 115, 22, 0.1);
    color: var(--level-b2);
  }
  .tag-c1 {
    background-color: rgba(239, 68, 68, 0.1);
    color: var(--level-c1);
  }
  .tag-c2 {
    background-color: rgba(220, 38, 38, 0.1);
    color: var(--level-c2);
  }

  /* Dark mode adjustments for level tags */
  :root.dark .tag-a1 { background-color: rgba(34, 197, 94, 0.15); }
  :root.dark .tag-a2 { background-color: rgba(132, 204, 22, 0.15); }
  :root.dark .tag-b1 { background-color: rgba(234, 179, 8, 0.15); }
  :root.dark .tag-b2 { background-color: rgba(249, 115, 22, 0.15); }
  :root.dark .tag-c1 { background-color: rgba(239, 68, 68, 0.15); }
  :root.dark .tag-c2 { background-color: rgba(220, 38, 38, 0.15); }

  /* Status Tags */
  .tag-pending {
    @apply bg-status-pending-soft text-status-pending;
  }

  .tag-approved {
    @apply bg-status-approved-soft text-status-approved;
  }

  .tag-rejected {
    @apply bg-status-rejected-soft text-status-rejected;
  }

  /* ─────────────────────────────────────────────────────────────
     INPUTS
     ───────────────────────────────────────────────────────────── */
  .input {
    @apply w-full px-3 py-2;
    @apply bg-surface border border-border rounded-lg;
    @apply text-foreground placeholder:text-foreground-muted;
    @apply transition-colors duration-150;
    @apply focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent;
  }

  .input-error {
    @apply border-error focus:ring-error;
  }

  /* ─────────────────────────────────────────────────────────────
     GLASS EFFECT (for header)
     ───────────────────────────────────────────────────────────── */
  .glass {
    @apply bg-surface/80 backdrop-blur-md;
    @apply border-b border-border;
  }

  :root.dark .glass {
    @apply bg-card/80;
  }

  /* ─────────────────────────────────────────────────────────────
     ALERT BOXES
     ───────────────────────────────────────────────────────────── */
  .alert {
    @apply p-4 rounded-lg border-l-4;
  }

  .alert-info {
    @apply bg-info-soft border-info text-foreground;
  }

  .alert-success {
    @apply bg-success-soft border-success text-foreground;
  }

  .alert-warning {
    @apply bg-warning-soft border-warning text-foreground;
  }

  .alert-error {
    @apply bg-error-soft border-error text-foreground;
  }

  /* ─────────────────────────────────────────────────────────────
     GRID
     ───────────────────────────────────────────────────────────── */
  .grid-list {
    @apply grid gap-6;
    @apply grid-cols-1 sm:grid-cols-2 lg:grid-cols-3;
  }

  /* ─────────────────────────────────────────────────────────────
     GRADIENTS
     ───────────────────────────────────────────────────────────── */
  .gradient-text {
    @apply bg-gradient-to-r from-primary to-blue-600 bg-clip-text text-transparent;
  }

  :root.dark .gradient-text {
    @apply from-blue-400 to-purple-400;
  }

  /* ─────────────────────────────────────────────────────────────
     LINE CLAMP
     ───────────────────────────────────────────────────────────── */
  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

/* ═══════════════════════════════════════════════════════════════
   9. PROSE OVERRIDES (Typography plugin)
   ═══════════════════════════════════════════════════════════════ */

@layer components {
  .prose {
    --tw-prose-body: var(--text-secondary);
    --tw-prose-headings: var(--text-primary);
    --tw-prose-links: var(--brand-primary);
    --tw-prose-bold: var(--text-primary);
    --tw-prose-code: var(--brand-primary);
    --tw-prose-pre-bg: var(--bg-muted);
    --tw-prose-quotes: var(--text-primary);
    --tw-prose-quote-borders: var(--brand-primary);
  }
}